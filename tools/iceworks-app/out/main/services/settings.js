const e=require("electron-settings"),t=require("../logger"),{defaultMaterials:s=[],isWin:r}=require("../shared"),i="userconfig",o={registry:"https://registry.npm.taobao.org",terminal:r?"Cmd":"Terminal",editor:"VisualStudioCode",tone:!0,shortcutKey:"CommandOrControl+alt+P",materials:s,isMaterialsBackup:!1};module.exports={withScope:e=>`userconfig.${e}`,init(){t.debug(e.file()),Object.entries(o).forEach(e=>{const[t,r]=e;if(this.has(t)){if("materials"===t){const e=this.get("materials"),r={};s.forEach(e=>{e.backupSource&&(r[e.source]=e)});const i=e.map(e=>{const t=r[e.source];return t?Object.assign({},t,e):e});this.set(t,i)}}else this.set(t,r)})},clear(){e.set("userconfig",{})},set(t,s){e.set(this.withScope(t),s)},get(t){return e.get(this.withScope(t))},has(t){return e.has(this.withScope(t))},getAll:()=>e.get("userconfig")};