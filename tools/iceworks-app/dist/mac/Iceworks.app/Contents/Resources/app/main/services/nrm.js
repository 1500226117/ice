const e=require("../logger"),s=require("./sessions/Session"),{NRM_CLI:r}=require("../paths");class t extends Error{constructor(e,s){super(e),this.metadata=s}}const n={run(n,o={}){"string"==typeof n&&(n=n.split(" "));const c=o.cwd||process.cwd();return e.debug("nrm",n.join(" "),c),new Promise((e,o)=>{const a=new s({cwd:c,shell:r,shellArgs:n});let d={};a.on("data",e=>{d={data:e}}),a.on("exit",s=>{0===s?e(d.data):o(new t("runcmd",{cmd:"nrm",args:n}))})})}};module.exports=n;