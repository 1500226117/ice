const e=require("electron-log"),{app:r}=require("electron"),s=require("util"),o=require("request");e.transports.file.level="info",e.transports.file.fileName="main.log",e.transports.file.maxSize=31457280,e.transports.sls=(({data:e,level:t})=>{const i="error"===t?e[0]:{},l="error"!==t?s.format(...e):i.message;let a="http://iceworks.cn-hangzhou.log.aliyuncs.com/logstores/iceworks-log/track?";const n={error_name:i.name,error_stack:i.stack,error_data:JSON.stringify(i),message:l,__topic__:t,APIVersion:"0.6.0",platform:`${process.platform}_${process.arch}`,iceworks_version:r.getVersion()},c=Object.keys(n),p=c.reduce((e,r,s)=>{return`${e}${r}=${"string"==typeof n[r]?n[r]:JSON.stringify(n[r])}${c.length-1===s?"":"&"}`},"");o({url:a+=p,timeout:2e3},()=>{})}),e.transports.sls.level="info",module.exports=e;