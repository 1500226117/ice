const e=require("fs"),r=require("path"),t=require("./utils"),a=require("await-to-js").default;module.exports=async function({destDir:i,scaffold:o,projectName:c,interpreter:n,progressFunc:s},l){let u,f,p;if([u,f]=await a(t.getTarballURLBySource(o.source)),u)throw u;if([u,p]=await a(t.extractTarball(f,i,o.source,s,l)),u)throw u;const w=r.join(i,"package.json");let d=e.readFileSync(w);try{d=JSON.parse(d.toString()),t.createInterpreter("FILE_CREATED",p,n),d.title=c,d.version="1.0.0",delete d.homepage,e.writeFileSync(w,`${JSON.stringify(d,null,2)}\n`,"utf-8")}catch(e){throw e}};