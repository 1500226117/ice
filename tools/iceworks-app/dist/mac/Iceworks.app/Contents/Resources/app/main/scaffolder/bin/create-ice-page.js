#!/usr/bin/env node
const e=require("../lib"),a=require("path"),o=process.cwd(),s=a.join(o),t=require("child_process").spawnSync;console.log("CREATE ICE APP"),e.createPage({destDir:s,pageName:"pageDemo",routePath:"page-demo",routeText:"page-demo",layout:"HeaderAsideFooterLayout",blocks:[{name:"area-stack-chart-block",npm:"@icedesign/area-stack-chart-block",version:"latest",description:"\u5806\u53e0\u533a\u57df\u56fe"}],interpreter:({type:e,message:a,data:o},s)=>{switch(console.log(a),e){case"DESTDIR_EXISTS_OVERRIDE":s(!0);break;case"FILE_CREATED":o.forEach(e=>console.log(e)),s(!0);break;case"ADD_DEPENDENCIES":const r=[];if(Object.keys(o).forEach(e=>{r.push(`${e}@${o[e]}`)}),0===r.length){s(!0);break}r.push("-S"),t("tnpm",["i"].concat(r),{stdio:"inherit"}),s(!0);break;default:s(!0)}}}).then(()=>e.removePreviewPage({destDir:s})).then(()=>{console.log("success")});